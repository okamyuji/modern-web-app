# ç¬¬7ç«  å®Ÿè·µã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºâ‘¡ - ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## æ¦‚è¦

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Server-Sent Events (SSE) ã‚’æ´»ç”¨ã—ãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚Golangã€HTMXã€Alpine.jsã€Tailwind CSSã‚’çµ„ã¿åˆã‚ã›ã¦ã€ãƒ¢ãƒ€ãƒ³ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## ä¸»è¦æ©Ÿèƒ½

### ğŸ’¬ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°

- **Server-Sent Events**: WebSocketã‚ˆã‚Šè»½é‡ã§HTTPã‚¤ãƒ³ãƒ•ãƒ©ã¨äº’æ›æ€§ãŒé«˜ã„
- **è‡ªå‹•å†æ¥ç¶š**: æ¥ç¶šãŒåˆ‡æ–­ã•ã‚ŒãŸå ´åˆã®è‡ªå‹•å¾©æ—§æ©Ÿèƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é…ä¿¡**: å³åº§ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é…ä¿¡

### ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

- **å‚åŠ ãƒ»é€€å‡ºé€šçŸ¥**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥é€€å®¤ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é€šçŸ¥
- **ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§**: ç¾åœ¨æ¥ç¶šä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«è¡¨ç¤º
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼åæ¤œè¨¼**: é©åˆ‡ãªæ–‡å­—åˆ¶é™ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯

### ğŸ—„ï¸ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ°¸ç¶šåŒ–

- **å±¥æ­´ä¿å­˜**: SQLiteã«ã‚ˆã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ°¸ç¶šåŒ–
- **åˆæœŸè¡¨ç¤º**: æ–°è¦å‚åŠ è€…ã¸ã®éå»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼ˆç›´è¿‘50ä»¶ï¼‰
- **çµ±è¨ˆæƒ…å ±**: æ¥ç¶šãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ãƒ»ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã®è¡¨ç¤º

### ğŸ¨ UI/UXæ©Ÿèƒ½

- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ãƒ†ãƒ¼ãƒåˆ‡æ›¿
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ
- **è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ™‚ã®è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- **æ–‡å­—æ•°åˆ¶é™**: 500æ–‡å­—åˆ¶é™ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
- **é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ **: æ¥ç¶šçŠ¶æ…‹ã‚„ã‚¨ãƒ©ãƒ¼ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

- **XSSå¯¾ç­–**: HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã«ã‚ˆã‚‹å®‰å…¨ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤º
- **å…¥åŠ›æ¤œè¨¼**: ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®é©åˆ‡ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ¶é™**: é•·ã™ãã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é˜²æ­¢

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- **Go**: 1.24.3
- **Gorilla Mux**: 1.8.1 (HTTP ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
- **SQLite**: è»½é‡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **UUID**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè­˜åˆ¥
- **Templ**: 0.3.887 (å‹å®‰å…¨ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³)

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **HTMX**: 1.9.5 + SSE Extension (Server-Sent Events)
- **Alpine.js**: 3.x (ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–UI)
- **Tailwind CSS**: 3.x (ãƒ¢ãƒ€ãƒ³ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°)

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```text
07-chat-app/
â”œâ”€â”€ main.go                     # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ go.mod                      # Go ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ message.go          # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ¢ãƒ‡ãƒ«ãƒ»Hubãƒ»ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â””â”€â”€ chat.go             # ãƒãƒ£ãƒƒãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ base.templ          # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®šç¾©
â”œâ”€â”€ db/
â”‚   â””â”€â”€ chat.db                 # SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â””â”€â”€ README.md                   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### Hub ãƒ‘ã‚¿ãƒ¼ãƒ³

```go
type Hub struct {
    clients    map[string]*Client
    Broadcast  chan *Message
    Register   chan *Client
    Unregister chan *Client
    mu         sync.RWMutex
    repo       *MessageRepository
}
```

#### SSE ã‚¹ãƒˆãƒªãƒ¼ãƒ 

```text
[ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ] â†â”€â”€â”€ SSE Stream â†â”€â”€â”€ [Hub] â†â”€â”€â”€ [ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡]
     â†“                                â†‘
[HTMX POST] â”€â”€â†’ [Handler] â”€â”€â†’ [Broadcast] â”€â”€â†’ [å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé…ä¿¡]
```

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### Message æ§‹é€ ä½“

```go
type Message struct {
    ID        string    `json:"id"`
    UserID    string    `json:"user_id"`
    Username  string    `json:"username"`
    Content   string    `json:"content"`
    Type      string    `json:"type"` // text, image, system
    CreatedAt time.Time `json:"created_at"`
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

```sql
CREATE TABLE messages (
    id TEXT PRIMARY KEY,
    user_id TEXT,
    username TEXT NOT NULL,
    content TEXT NOT NULL,
    type TEXT DEFAULT 'text',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## å®Ÿè¡Œæ–¹æ³•

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd 07-chat-app
go mod tidy
```

### 2. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ

```bash
templ generate
```

### 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•

```bash
go run main.go
```

### 4. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹

http://localhost:8082

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ |
|---------|------|------|
| GET | `/` | ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ |
| POST | `/chat` | ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ å‚åŠ  |
| GET | `/chat/stream` | SSEã‚¹ãƒˆãƒªãƒ¼ãƒ æ¥ç¶š |
| POST | `/chat/send` | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ |
| GET | `/chat/stats` | çµ±è¨ˆæƒ…å ±å–å¾— |

## Server-Sent Events å®Ÿè£…

### 1. SSE æ¥ç¶šè¨­å®š

```html
<div 
    hx-ext="sse"
    sse-connect="/chat/stream?username=username"
    sse-swap="message"
    hx-swap="beforeend"
>
```

### 2. ã‚µãƒ¼ãƒãƒ¼å´SSEå®Ÿè£…

```go
func (h *ChatHandler) Stream(w http.ResponseWriter, r *http.Request) {
    // SSEãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
    w.Header().Set("Content-Type", "text/event-stream")
    w.Header().Set("Cache-Control", "no-cache")
    w.Header().Set("Connection", "keep-alive")
    
    // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç™»éŒ²
    client := &models.Client{
        ID:       uuid.New().String(),
        Username: username,
        Send:     make(chan *models.Message, 256),
    }
    
    h.hub.Register <- client
    defer func() { h.hub.Unregister <- client }()
    
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡ãƒ«ãƒ¼ãƒ—
    for {
        select {
        case message := <-client.Send:
            fmt.Fprintf(w, "event: message\n")
            fmt.Fprintf(w, "data: %s\n\n", htmlTemplate)
            w.(http.Flusher).Flush()
        case <-time.After(30 * time.Second):
            fmt.Fprintf(w, ": keepalive\n\n")
            w.(http.Flusher).Flush()
        }
    }
}
```

### 3. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ

```go
func (h *Hub) Run() {
    for {
        select {
        case message := <-h.Broadcast:
            h.repo.SaveMessage(message)
            h.broadcastMessage(message)
        }
    }
}
```

## HTMX + Alpine.js æ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¥ç¶šçŠ¶æ…‹ç®¡ç†

```javascript
function chatApp() {
    return {
        connected: false,
        
        init() {
            document.body.addEventListener('htmx:sseOpen', () => {
                this.connected = true;
                this.showNotification('æ¥ç¶šã—ã¾ã—ãŸ', 'success');
            });
            
            document.body.addEventListener('htmx:sseError', () => {
                this.connected = false;
                this.scheduleReconnect();
            });
        }
    }
}
```

### 2. è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ©Ÿèƒ½

```javascript
document.body.addEventListener('htmx:sseMessage', (event) => {
    this.$nextTick(() => {
        const messages = document.getElementById('messages');
        messages.scrollTop = messages.scrollHeight;
    });
});
```

### 3. ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã¨è‡ªå‹•ãƒªã‚»ãƒƒãƒˆ

```html
<form 
    hx-post="/chat/send"
    hx-on:htmx:after-request="if(event.detail.successful) { this.reset(); $refs.input.focus(); }"
>
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. åŠ¹ç‡çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡

```go
func (h *Hub) broadcastMessage(message *Message) {
    h.mu.RLock()
    defer h.mu.RUnlock()
    
    for id, client := range h.clients {
        select {
        case client.Send <- message:
            // é€ä¿¡æˆåŠŸ
        default:
            // ãƒãƒƒãƒ•ã‚¡æº€æ¯æ™‚ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ‡æ–­
            close(client.Send)
            delete(h.clients, id)
        }
    }
}
```

### 2. ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°æˆ¦ç•¥

- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒãƒƒãƒ•ã‚¡**: 256ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡ã‚­ãƒ¥ãƒ¼
- **ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°é€ä¿¡**: ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯é˜²æ­¢
- **è‡ªå‹•ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé™¤å»**: å¿œç­”ã—ãªã„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è‡ªå‹•å‰Šé™¤

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

```sql
-- åŠ¹ç‡çš„ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
CREATE INDEX idx_messages_created_at ON messages(created_at);
CREATE INDEX idx_messages_type ON messages(type);
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### 1. XSSå¯¾ç­–

```go
// HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
message.Content = html.EscapeString(content)
```

### 2. å…¥åŠ›æ¤œè¨¼

```go
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é•·åˆ¶é™
if len(content) > 500 {
    http.Error(w, "Message too long", http.StatusBadRequest)
    return
}

// ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼
pattern="[a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+"
```

### 3. ãƒªã‚½ãƒ¼ã‚¹ä¿è­·

```go
// é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
case <-time.After(30 * time.Second):
    // ã‚­ãƒ¼ãƒ—ã‚¢ãƒ©ã‚¤ãƒ–é€ä¿¡

// ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã®é˜²æ­¢
defer func() {
    h.hub.Unregister <- client
}()
```

## ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è€ƒæ…®

### 1. æ¥ç¶šæ•°åˆ¶é™

```go
const MaxClients = 1000

func (h *Hub) GetClientCount() int {
    h.mu.RLock()
    defer h.mu.RUnlock()
    return len(h.clients)
}
```

### 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ç®¡ç†

```go
// å¤ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‡ªå‹•å‰Šé™¤
func (r *MessageRepository) DeleteOldMessages(days int) error {
    query := `DELETE FROM messages WHERE created_at < datetime('now', '-' || ? || ' days')`
    _, err := r.db.Exec(query, days)
    return err
}
```

### 3. æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å¯¾å¿œ

- Redis Pub/Sub ã«ã‚ˆã‚‹è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹é–“é€šä¿¡
- ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼é…ä¸‹ã§ã® Sticky Session
- åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ç§»è¡Œè¨ˆç”»

## é‹ç”¨ãƒ»ç›£è¦–

### 1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```go
func (h *ChatHandler) HealthCheck(w http.ResponseWriter, r *http.Request) {
    stats := map[string]interface{}{
        "status":          "healthy",
        "connected_users": h.hub.GetClientCount(),
        "uptime":          time.Since(startTime),
    }
    json.NewEncoder(w).Encode(stats)
}
```

### 2. ãƒ­ã‚°å‡ºåŠ›

```go
// æ§‹é€ åŒ–ãƒ­ã‚°
log.Printf("Client connected: id=%s, username=%s", client.ID, client.Username)
log.Printf("Message broadcast: id=%s, users=%d", message.ID, len(h.clients))
```

### 3. ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

- æ¥ç¶šãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã®æ¨ç§»
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ¬ãƒ¼ãƒˆ
- æ¥ç¶šæŒç¶šæ™‚é–“
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```go
func TestHubBroadcast(t *testing.T) {
    hub := models.NewHub(repo)
    // ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
}
```

### 2. çµ±åˆãƒ†ã‚¹ãƒˆ

```go
func TestSSEConnection(t *testing.T) {
    // SSEæ¥ç¶šã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ã®ãƒ†ã‚¹ãƒˆ
}
```

### 3. è² è·ãƒ†ã‚¹ãƒˆ

```go
// å¤§é‡ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¥ç¶šãƒ†ã‚¹ãƒˆ
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ¬ãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ
// é•·æ™‚é–“æ¥ç¶šå®‰å®šæ€§ãƒ†ã‚¹ãƒˆ
```

## æ‹¡å¼µã‚¢ã‚¤ãƒ‡ã‚¢

### 1. é«˜åº¦ãªæ©Ÿèƒ½

- **ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ **: è¤‡æ•°éƒ¨å±‹ã®ä½œæˆã¨ç®¡ç†
- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: 1å¯¾1ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°
- **ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰**: ç”»åƒãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢**: éå»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å…¨æ–‡æ¤œç´¢

### 2. UI/UXæ”¹å–„

- **å…¥åŠ›ä¸­è¡¨ç¤º**: ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ—¢èª­**: æ—¢èª­çŠ¶æ…‹ã®ç®¡ç†
- **çµµæ–‡å­—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- **é€šçŸ¥éŸ³**: ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªé€šçŸ¥éŸ³

### 3. ç®¡ç†æ©Ÿèƒ½

- **ç®¡ç†è€…ãƒ‘ãƒãƒ«**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã¨ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤**: ä¸é©åˆ‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰Šé™¤
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ–ãƒ­ãƒƒã‚¯**: å•é¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ’é™¤
- **çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: åˆ©ç”¨çŠ¶æ³ã®å¯è¦–åŒ–

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **SSEæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã‚‹**

   ```bash
   # ã‚­ãƒ¼ãƒ—ã‚¢ãƒ©ã‚¤ãƒ–é–“éš”ã®èª¿æ•´
   # ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®ç¢ºèª
   # ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã®ç¢ºèª
   ```

2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé‡è¤‡ã™ã‚‹**

   ```bash
   # UUIDé‡è¤‡ã®ç¢ºèª
   # ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã®ç¢ºèª
   ```

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–**

   ```bash
   # æ¥ç¶šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°ã®ç›£è¦–
   # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡é »åº¦ã®åˆ¶é™
   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æœ€é©åŒ–
   ```

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

1. **ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š**

   ```go
   log.SetLevel(log.DebugLevel)
   ```

2. **æ¥ç¶šçŠ¶æ…‹ç¢ºèª**

   ```javascript
   // ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–
   // EventSourceæ¥ç¶šã®ç›£è¦–
   ```

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª**

   ```sql
   -- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ç¢ºèª
   SELECT COUNT(*) FROM messages;
   
   -- æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª
   SELECT * FROM messages ORDER BY created_at DESC LIMIT 10;
   ```

---

ã“ã®ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã®åŸºç¤æŠ€è¡“ã‚’å­¦ã¶å®Ÿè·µçš„ãªæ•™æã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
Server-Sent Events ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªé€šä¿¡ã¨ã€ãƒ¢ãƒ€ãƒ³ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€
ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿å®ˆæ€§ã®é«˜ã„ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰æ–¹æ³•ã‚’ç¿’å¾—ã§ãã¾ã™ã€‚
